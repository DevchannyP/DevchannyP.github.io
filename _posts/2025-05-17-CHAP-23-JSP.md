---
layout: post
title: "CHAP 3-5. íŒŒì¼ ì—…ë¡œë“œ êµ¬í˜„"
date: 2025-05-17
categories: [backend, language, jsp]
tags: [backend, language, jsp]
thumbnail: /assets/img/post-thumbnails/intro3.png
author: Devchanny
---


# ** ğŸ“ŒíŒŒì¼ ì—…ë¡œë“œ êµ¬í˜„ **

> JSP + Servlet í™˜ê²½ì—ì„œ ì´ë¯¸ì§€, ì²¨ë¶€íŒŒì¼ ë“±ì„ ì—…ë¡œë“œí•˜ê³ 
> 
> 
> ì„œë²„ì— ì•ˆì „í•˜ê²Œ ì €ì¥í•˜ëŠ” ì „ì²´ íë¦„ê³¼ ì˜ˆì œ ì™„ì „ ì •ë¦¬
> 

---

## ğŸ§© ëª©ì°¨

1. ê°œë…: íŒŒì¼ ì—…ë¡œë“œë€?
2. ì „ì²´ íë¦„ë„
3. enctype="multipart/form-data"ë€?
4. ì—…ë¡œë“œ ì²˜ë¦¬ ë°©ë²• (cos.jar or commons-fileupload ì‚¬ìš©)
5. ì‹¤ì „ ì˜ˆì œ ì½”ë“œ
6. ì €ì¥ ê²½ë¡œ ë° íŒŒì¼ëª… ì²˜ë¦¬
7. ê¸°ìˆ  ë©´ì ‘ ëŒ€ë¹„ í•µì‹¬ ìš”ì•½
8. ë§ˆë¬´ë¦¬ ìš”ì•½ + Notion ì‘ì„± íŒ

---

## âœ… 1. ê°œë…: íŒŒì¼ ì—…ë¡œë“œë€?

| í•­ëª© | ì„¤ëª… |
| --- | --- |
| ì •ì˜ | ì‚¬ìš©ìê°€ ë¸Œë¼ìš°ì €ì—ì„œ ì„ íƒí•œ íŒŒì¼ì„ ì„œë²„ë¡œ ì „ì†¡í•˜ê³  ì €ì¥í•˜ëŠ” ê³¼ì • |
| ì‚¬ìš© ëª©ì  | í”„ë¡œí•„ ì´ë¯¸ì§€, ê²Œì‹œíŒ ì²¨ë¶€íŒŒì¼, ë¬¸ì„œ ì—…ë¡œë“œ ë“± |
| ì²˜ë¦¬ ë°©ì‹ | `<form>` íƒœê·¸ì—ì„œ `enctype="multipart/form-data"` ì‚¬ìš© í•„ìˆ˜ |

---

## âœ… 2. ì „ì²´ íë¦„ë„

```
[1] form.jsp
 â¬‡ (íŒŒì¼ ì„ íƒ + form ì „ì†¡)
[2] UploadServlet
 â¬‡ (MultipartRequest ì²˜ë¦¬)
[3] ì„œë²„ ê²½ë¡œì— íŒŒì¼ ì €ì¥
 â¬‡
[4] DBì— íŒŒì¼ëª… ì €ì¥ or í™”ë©´ ì¶œë ¥
```

---

## âœ… 3. enctype="multipart/form-data"ë€?

| í•­ëª© | ì„¤ëª… |
| --- | --- |
| ì—­í•  | íŒŒì¼ì„ í¬í•¨í•œ form ë°ì´í„°ë¥¼ **ì¼ë°˜ í…ìŠ¤íŠ¸ê°€ ì•„ë‹Œ ë°”ì´ë„ˆë¦¬ í˜•ì‹**ìœ¼ë¡œ ì „ì†¡ |
| í•„ìˆ˜ ì¡°ê±´ | `<form method="post" enctype="multipart/form-data">` ì„¤ì • ì‹œë§Œ íŒŒì¼ ì „ì†¡ ê°€ëŠ¥ |

---

## âœ… 4. ì—…ë¡œë“œ ì²˜ë¦¬ ë°©ë²•

### âœ… ê°€ì¥ ë§ì´ ì“°ëŠ” ë°©ë²•: **cos.jar (MultipartRequest)**

| í•­ëª© | ì„¤ëª… |
| --- | --- |
| í´ë˜ìŠ¤ | `com.oreilly.servlet.MultipartRequest` |
| í•„ìš” ë¼ì´ë¸ŒëŸ¬ë¦¬ | **cos.jar** (ì›¹ í”„ë¡œì íŠ¸ `/WEB-INF/lib`ì— ì¶”ê°€) |
| ì¥ì  | ê°„ë‹¨í•˜ê²Œ íŒŒì¼ ì €ì¥ ê°€ëŠ¥, ë³„ë„ Servlet ì„¤ì • ë¶ˆí•„ìš” |
| ë‹¨ì  | ëŒ€ìš©ëŸ‰ íŒŒì¼, íŒŒì¼ í•„í„° ë“± ê³ ê¸‰ ê¸°ëŠ¥ ë¶€ì¡± |

---

## âœ… 5. ì‹¤ì „ ì˜ˆì œ ì½”ë“œ

---

### ğŸ“„ [1] upload.jsp (ì—…ë¡œë“œ í¼)

```html
<form action="upload" method="post" enctype="multipart/form-data">
  íŒŒì¼ ì„ íƒ: <input type="file" name="uploadFile" /><br />
  <input type="submit" value="ì—…ë¡œë“œ" />
</form>
```

---

### ğŸ“„ [2] UploadServlet.java

```java
@WebServlet("/upload")
public class UploadServlet extends HttpServlet {
  protected void doPost(HttpServletRequest request, HttpServletResponse response)
      throws ServletException, IOException {

    String savePath = request.getServletContext().getRealPath("/upload"); // ì €ì¥ í´ë” ê²½ë¡œ
    int maxSize = 10 * 1024 * 1024; // ìµœëŒ€ 10MB
    String encoding = "UTF-8";

    // cos.jar ê¸°ë°˜ MultipartRequest ê°ì²´ ìƒì„±
    MultipartRequest multi = new MultipartRequest(
      request,
      savePath,
      maxSize,
      encoding,
      new DefaultFileRenamePolicy() // ì¤‘ë³µ ì‹œ íŒŒì¼ëª… ìë™ ë³€ê²½
    );

    // input name="uploadFile"ì˜ íŒŒì¼ ì´ë¦„ ì–»ê¸°
    String fileName = multi.getFilesystemName("uploadFile");

    response.setContentType("text/html;charset=UTF-8");
    PrintWriter out = response.getWriter();
    out.println("<h3>ì—…ë¡œë“œ ì™„ë£Œ: " + fileName + "</h3>");
  }
}
```

---

### âœ… í”„ë¡œì íŠ¸ì— cos.jar ì¶”ê°€ ë°©ë²•

- cos.jar ë‹¤ìš´ë¡œë“œ ë§í¬
- `/WEB-INF/lib/` í´ë”ì— ë„£ê¸°
- í”„ë¡œì íŠ¸ ì¬ë¹Œë“œ (ì´í´ë¦½ìŠ¤, IntelliJ ë“±ì—ì„œ)

---

## âœ… 6. ì €ì¥ ê²½ë¡œ ë° íŒŒì¼ëª… ì²˜ë¦¬ íŒ

| í•­ëª© | ì˜ˆì‹œ/ì„¤ëª… |
| --- | --- |
| ì €ì¥ ê²½ë¡œ | `getServletContext().getRealPath("/upload")` = ì„œë²„ì˜ ì‹¤ì œ ê²½ë¡œ |
| ì¤‘ë³µ ë°©ì§€ | `DefaultFileRenamePolicy()` â†’ ìë™ìœ¼ë¡œ íŒŒì¼ëª… ë³€ê²½ (ì˜ˆ: photo.png â†’ photo1.png) |
| DB ì €ì¥ ì‹œ | íŒŒì¼ëª…ì„ DBì— ì €ì¥í•˜ë©´ ì´í›„ ë‹¤ìš´ë¡œë“œ/ì¶œë ¥ì— í™œìš© ê°€ëŠ¥ |

---

## âœ… 7. ê¸°ìˆ  ë©´ì ‘ ëŒ€ë¹„ í•µì‹¬ ìš”ì•½ ğŸ’¬

| ì§ˆë¬¸ | ìš”ì  ì •ë¦¬ |
| --- | --- |
| íŒŒì¼ ì—…ë¡œë“œ ì‹œ form ì„¤ì •ì€? | method="post" + enctype="multipart/form-data" |
| Servletì—ì„œ íŒŒì¼ ì²˜ë¦¬ í´ë˜ìŠ¤ëŠ”? | `MultipartRequest` (cos.jar) |
| ì €ì¥ ê²½ë¡œëŠ” ì–´ë–»ê²Œ êµ¬í•˜ë‚˜ìš”? | `getServletContext().getRealPath("/í´ë”")` |
| íŒŒì¼ ì¤‘ë³µ ì‹œ ì²˜ë¦¬ ë°©ë²•ì€? | `DefaultFileRenamePolicy()` ë˜ëŠ” UUID í™œìš© |
| cos.jar ë§ê³  ë‹¤ë¥¸ ë°©ë²•ì€? | Apache `commons-fileupload`, Spring Multipart ì§€ì› ë“± |

---

## âœ… 8. ë§ˆë¬´ë¦¬ ìš”ì•½ ğŸ§ 

- ğŸ“ **íŒŒì¼ ì—…ë¡œë“œëŠ” Multipart/form-data**ë¡œ ì²˜ë¦¬
- ğŸ”§ ì„œë²„ì—ì„œëŠ” MultipartRequestë¡œ íŒŒì‹± í›„ ì €ì¥
- ğŸ“Œ íŒŒì¼ëª…, ê²½ë¡œëŠ” ë°˜ë“œì‹œ DBë‚˜ ë³€ìˆ˜ë¡œ ì €ì¥í•´ì„œ ê´€ë¦¬
- âœ… íŒŒì¼ ì—…ë¡œë“œ êµ¬í˜„ì€ ê²Œì‹œíŒ, í”„ë¡œí•„ ì´ë¯¸ì§€, ìë£Œì‹¤ ë“±ì—ì„œ ê¸°ë³¸ ê¸°ìˆ 
